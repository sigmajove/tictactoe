<!doctype html><html lang=en><meta charset=UTF-8><meta content="width=device-width,initial-scale=1.0" name=viewport><title>Tic Tac Toe</title><style>#board{grid-gap:0;grid-template:"cell0 vbar0 cell1 vbar1 cell2"50px"hbar0 hbar0 hbar0 hbar0 hbar0"5px"cell3 vbar2 cell4 vbar3 cell5"50px"hbar1 hbar1 hbar1 hbar1 hbar1"5px"cell6 vbar4 cell7 vbar5 cell8"50px/50px 5px 50px 5px 50px}#message{text-align:center;width:160px}</style><body><h1>Tic-Tac-Toe</h1><div id=selector style=visibility:visible><p>Would you like to go first or second?</p><label>First (X) <input checked name=who type=radio value=first></label><br><label>Second (O) <input name=who type=radio value=second></label><br><div><button onclick=playButton()>Play</button></div></div><div id=board style=display:none></div><div id=message style=display:none></div><script>var checkTwoInARow=(a=>{let c=` `;let b=[];checkRows((d,e,f)=>{let g=board[d];let h=board[e];let i=board[f];if(g==c&&h==a&&i==a){b.push(d)}else if(h==c&&g==a&&i==a){b.push(e)}else if(i==c&&g==a&&h==a){b.push(f)}});return b});var addGoodMoves=(a=>{let d=``;let b=[];let c=a.split(d);for(let a=0;a<c.length;++a){if(c[a]==`\$`){b.push(a);c[a]=` `}};goodMoves.set(c.join(d),b)});var blackRectangle=((a,b,c)=>{const d=document.createElement(`div`);d.style=`${a}; width:${b}px; height:{$height}px; background-color:black;`;return d});var rotate=(a=>`${a[2]}${a[5]}${a[8]}${a[1]}${a[4]}${a[7]}${a[0]}${a[3]}${a[6]}`);var symmetry=((a,b)=>{let c=b;rotate3=()=>{for(let b=0;b<3;++b){a(c);c=rotate(c)}};rotate3();a(c);c=mirror(c);rotate3();a(c)});var clickSquare=(a=>{if(working||gameOver){return};if(board[a]!=` `){return};board[a]=myXO;cells[a].innerHTML=myXO==`X`?xSquare:oSquare;if(checkGameOver(myXO)){gameOver=!0;window.onbeforeunload=undefined;return};m=getComputerMove();if(m!==null){working=!0;document.getElementById(`message`).innerHTML=`<div style="height:10px; background-color:transparent;"></div>
<div style="background-color:#ddd;">
<div id="progressBar" style="width:0; height:15px; background-color:#5c9ec4;">
</div>
</div>`;const a=document.getElementById(`progressBar`);var b=0;const c=setInterval(()=>{b+=3;if(b>100){clearInterval(c);displayComputerMove(m);working=!1}else{a.style.width=`${b}%`}},10)}});var displayComputerMove=(a=>{board[a]=computerXO;cells[a].innerHTML=computerXO==`X`?xSquare:oSquare;working=!1;if(checkGameOver(computerXO)){gameOver=!0;window.onbeforeunload=undefined}else{document.getElementById(`message`).innerHTML=prompt}});var restartButton=(()=>{let a=`none`;document.getElementById(`selector`).style.display=`block`;document.getElementById(`board`).style.display=a;document.getElementById(`message`).style.display=a});var squareButton=(a=>`<button onclick="clickSquare(${a})"
style="display:block; background: transparent; border: none !important;
font-size:0; height:50px; width:50px;">
</button>`);var mirror=(a=>`${a[2]}${a[1]}${a[0]}${a[5]}${a[4]}${a[3]}${a[8]}${a[7]}${a[6]}`);var getComputerMove=(()=>{let b=0,c=Math;let a=checkTwoInARow(computerXO);if(a.length==b){a=checkTwoInARow(myXO)};if(a.length==b){a=goodMoves.get(board.join(``))};if(a===undefined){a=[];for(let c=b;c<9;++c){if(board[c]==` `){a.push(c)}}};return a.length==b?null:a[c.floor(c.random()*a.length)]});var checkGameOver=(a=>{let c=` `,d=`message`;let b=!1;checkRows((a,d,e)=>{let f=board[a];let g=board[d];let h=board[e];if(f==g&&g==h&&f!=c){b=!0}});if(b){document.getElementById(d).innerHTML=`<h3>${a} wins ${restartHTML}</h3>`;return !0};for(let a=0;a<9;++a){if(board[a]==c){return !1}};document.getElementById(d).innerHTML=`<h3>Tie game ${restartHTML}</h3>`;return !0});var playButton=(()=>{let a=`X`,c=` `,b=`O`,d=9,f=`message`,e=Math;switch(document.querySelector(`input[name=who]:checked`).value){case `first`:myXO=a;computerXO=b;break;case `second`:myXO=b;computerXO=a;break}gameOver=!1;board=Array.from(c.repeat(d));if(myXO==b){board[e.floor(e.random()*d)]=a};document.getElementById(f).innerHTML=prompt;document.getElementById(`selector`).style.display=`none`;document.getElementById(`board`).style.display=`grid`;document.getElementById(f).style.display=`block`;for(let a=0;a<cells.length;++a){cells[a].innerHTML=board[a]==c?squareButton(a):xSquare};window.onbeforeunload=()=>``});var checkRows=(a=>{let h=6,b=0,c=1,f=4,g=5,i=7,j=8,d=2,e=3;a(b,c,d);a(e,f,g);a(h,i,j);a(b,e,h);a(c,f,i);a(d,g,j);a(b,f,j);a(d,f,h)});const svgHdr=`<svg width="50" height="50" xmlns="http://www.w3.org/2000/svg">`;const xSquare=`${svgHdr} 
<path d="M 5 5 L 45 45 M 45 5 L 5 45" style="stroke:blue; stroke-width:4" />
</svg>`;const oSquare=`${svgHdr}
<ellipse cx="25" cy="25", rx="20", ry="20"
style="fill:none; stroke:blue; stroke-width:4" />
</svg>`;const restartHTML=`<button onclick="restartButton()">Play Again</button>`;let board=null;let gameOver=null;let working=!1;let myXO=null;let computerX0=null;const prompt=`<p>Click on a square to make a move</p>`;let cells=[];{let b=0,c=`5`;const a=document.getElementById(`board`);for(let c=b;c<9;++c){const b=document.createElement(`div`);b.style=`grid-area:cell${c}`;cells.push(b);a.appendChild(b)};for(let d=b;d<6;++d){a.appendChild(blackRectangle(`grid-area:vbar${d}`,c,`50`))};for(let d=b;d<2;++d){a.appendChild(blackRectangle(`grid-area:hbar${d}`,`160`,c))}}let goodMoves=new Map();{const a=[`X   \$    `,`X   \$O X `,`X  \$\$X\$ O`,`X \$   \$ O`,`X \$ \$O\$  `,`X \$ X \$ O`,`X O    X\$`,`X O\$  \$ \$`,`X O\$ X  O`,`X O\$\$X   `,`X O\$\$X O `,`X O\$\$X XO`,`X\$ \$O\$ \$X`,`X\$\$ OX \$\$`,`X\$\$ OX\$\$O`,`XO    \$X\$`,`XO   O\$X\$`,`XO  \$X   `,`XO  \$XO \$`,`XO  \$XOX\$`,`XO  O \$X `,`XO  OX\$X\$`,`XO \$ X  O`,`XO \$\$ \$  `,`XO \$\$X\$XO`,`XO \$X \$ O`,`XO O X  \$`,`XO O X X\$`,`XO OOX X\$`,`XO X\$ O  `,`XO X\$\$OX\$`,`XOO\$ \$\$X\$`,`XOO\$ X XO`,`XOO\$\$X\$\$ `,`XOOO X X\$`,`XOX   O \$`,`XOX \$    `,`XOX \$\$OX\$`,`XOXO  OX\$`,`XOXO\$   \$`,`XOXO\$  X\$`,`XOXX  O\$ `,`XXO   \$O\$`,`XXO  \$  \$`,`XXO  X\$ O`,`XXO  X\$O `,`OX   X\$  `,`OX \$\$ \$ \$`,`OX \$\$X\$O\$`,`OX \$X\$\$O\$`,`OX X\$\$ \$ `,`OX\$X\$O \$\$`,`OXOX\$    `,` X OXX\$O `,` X\$O X  \$`,` X\$O X O `,` X\$OOX   `,`\$ \$ X \$ \$`,`\$O\$\$X\$\$ \$`,`\$X    O  `,`\$X   XO \$`,`\$X O\$    `,`\$X OOX\$X `,`\$X\$ \$  \$ `,`\$X\$ X \$O\$`,`\$X\$\$O\$\$ \$`,`\$X\$OX  O `,`\$X\$XO \$  `];for(let b=0;b<a.length;++b){symmetry(a=>{addGoodMoves(a)},a[b])}}</script>